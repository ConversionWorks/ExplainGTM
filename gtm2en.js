function cleanUp(){jQuery("#vChoose").remove(),jQuery(".containerText").remove(),jQuery("#contRef").remove()}var xmlhttp=new XMLHttpRequest,cRE=/\/container\/accounts\/(\d+)\/containers\/(\d+)/g,cREOutput=[],accountId=0,containerId=0;cREOutput=cRE.exec(document.location.hash),null!==cREOutput&&3===cREOutput.length&&(accountId=cREOutput[1]),containerId=cREOutput[2],jQuery("body").append('<form id="gtm2en" method="post" action="http://www.conversionworks.co.uk/gtm2en/php/gtm2en.php"> <div id="vChoose" style="position:absolute;top:200px;left:30%;width:500px;height:200px;border:1px solid gray;background-color:#ccc;padding-top:30px;text-align:center;">Type the container version below. Use "0" to get the version being edited:<br /> <input type="text" size="3" maxlength="3" id="cVN" value=""></input>&nbsp;<input type="button" value="Choose this version"></input><br /><br /><input type="submit" id="processVersion" value="Explain GTM to me" style="margin-left:12px;background-color:white;display:none"></input>&nbsp;&nbsp;&nbsp;<input type="button" id="copy" value="Copy container to clipboard" style="margin-left:12px;display:none"></input><br /><br /><p id="cancelProcess" style="position:relative; margin-top:-160px;margin-left:470px">X</p></div><textarea class="containerText" name="container" id="container" style="position:absolute;top:1000px"></textarea><input type="text" value="'+document.location.href+'" name="contRef" id="contRef" style="position:absolute;top:1000px"></input></form>'),$(window).keydown(function(e){return 13==e.keyCode?(e.preventDefault(),!1):void 0}),jQuery("#cVN").change(function(){if(containerVersion=""!==jQuery("#cVN").val()?parseInt(escape(jQuery("#cVN").val())):0,isNaN(containerVersion))alert("The container version needs to be a number or empty - no letters");else{var e="https://tagmanager.google.com/api/accounts/"+accountId+"/containers/"+containerId+"/versions/"+containerVersion+"/export";xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){var e=JSON.parse(xmlhttp.responseText);jQuery("#copy").show(),jQuery("#processVersion").show(),jQuery(".containerText").val(JSON.stringify(e))}},xmlhttp.open("GET",e,!0),xmlhttp.send()}}),jQuery("#cancelProcess").click(function(){cleanUp()}),jQuery("#copy").click(function(){containerCopy=document.querySelector(".containerText"),containerCopy.select(),document.execCommand("copy"),cleanUp()});